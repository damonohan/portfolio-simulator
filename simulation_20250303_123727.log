2025-03-03 12:37:27,760 - src.main - INFO - Starting Portfolio Simulator
2025-03-03 12:37:27,761 - src.main - INFO - Simulation period: 2008 to 2020
2025-03-03 12:37:27,761 - src.main - INFO - Loading market data and structured notes...
2025-03-03 12:37:27,761 - src.data_processing - INFO - Loading S&P 500 data from data/sp500_returns.csv
2025-03-03 12:37:27,775 - src.data_processing - INFO - Loaded S&P 500 returns for 48 years
2025-03-03 12:37:27,775 - src.data_processing - INFO - Loading bond return data from data/bond_returns.csv
2025-03-03 12:37:27,777 - src.data_processing - INFO - Loaded bond returns for 49 years
2025-03-03 12:37:27,777 - src.data_processing - INFO - Loading structured note data from data/structured_notes.csv
2025-03-03 12:37:27,778 - src.data_processing - INFO - Loaded 196 structured notes
2025-03-03 12:37:27,778 - src.data_processing - INFO - Aligning data from 2008 to 2020
2025-03-03 12:37:27,779 - src.data_processing - INFO - Found overlapping data for 13 years: 2008.0 to 2020.0
2025-03-03 12:37:27,780 - src.main - INFO - Running portfolio simulation...
2025-03-03 12:37:27,780 - src.portfolio - DEBUG - Rebalancing portfolio (value: $1,000,000.00)
2025-03-03 12:37:27,780 - src.portfolio - DEBUG -   sp500: $600,000.00 (60.00%)
2025-03-03 12:37:27,780 - src.portfolio - DEBUG -   bonds: $400,000.00 (40.00%)
2025-03-03 12:37:27,780 - src.portfolio - INFO - Created portfolio with initial value $1,000,000.00
2025-03-03 12:37:27,780 - src.portfolio - INFO -   Allocations: {'sp500': 0.6, 'bonds': 0.4}
2025-03-03 12:37:27,780 - src.simulation - INFO - Created portfolio 'traditional' with allocations: {'sp500': 0.6, 'bonds': 0.4}
2025-03-03 12:37:27,780 - src.portfolio - DEBUG - Rebalancing portfolio (value: $1,000,000.00)
2025-03-03 12:37:27,780 - src.portfolio - DEBUG -   sp500: $400,000.00 (40.00%)
2025-03-03 12:37:27,780 - src.portfolio - DEBUG -   bonds: $300,000.00 (30.00%)
2025-03-03 12:37:27,780 - src.portfolio - DEBUG -   notes: $300,000.00 (30.00%)
2025-03-03 12:37:27,780 - src.portfolio - INFO - Created portfolio with initial value $1,000,000.00
2025-03-03 12:37:27,780 - src.portfolio - INFO -   Allocations: {'sp500': 0.4, 'bonds': 0.3, 'notes': 0.3}
2025-03-03 12:37:27,781 - src.simulation - INFO - Created portfolio 'structured' with allocations: {'sp500': 0.4, 'bonds': 0.3, 'notes': 0.3}
2025-03-03 12:37:27,781 - src.retirement - INFO - Created withdrawal strategy: FixedPercentageWithdrawal
2025-03-03 12:37:27,781 - src.retirement - INFO - Fixed percentage withdrawal: 4.00%
2025-03-03 12:37:27,781 - src.simulation - INFO - Created withdrawal strategy: FixedPercentageWithdrawal
2025-03-03 12:37:27,781 - src.simulation - INFO - Initialized simulation: 2008 to 2020
2025-03-03 12:37:27,781 - src.simulation - INFO - Running simulation from 2008 to 2020
2025-03-03 12:37:27,781 - src.simulation - INFO - Simulating year 2008
2025-03-03 12:37:27,781 - src.simulation - INFO - ===== YEAR 2008 RETURNS =====
2025-03-03 12:37:27,781 - src.simulation - INFO - S&P 500: -38.4858%, Bond: 6.8639%
2025-03-03 12:37:27,781 - src.simulation - INFO - Selecting structured note for year 2008
2025-03-03 12:37:27,781 - src.simulation - INFO - Found 4 notes available for year 2008
2025-03-03 12:37:27,781 - src.simulation - INFO - Target protection level: 10%
2025-03-03 12:37:27,781 - src.simulation - INFO - Found exact match: 10% Buffer, PR: 1.0920
2025-03-03 12:37:27,781 - src.structured_notes - DEBUG - Created structured note: No ID, PR: 1.09, Protection: 0.10, Year: 2008
2025-03-03 12:37:27,781 - src.simulation - INFO - STRUCTURED NOTE: S&P 500 10% Buffer Note (PR: 1.09)
2025-03-03 12:37:27,781 - src.simulation - INFO - - Protection Level: 10.00%
2025-03-03 12:37:27,781 - src.simulation - INFO - - Participation Rate: 1.0920
2025-03-03 12:37:27,781 - src.simulation - INFO - - Protection Type: Buffer
2025-03-03 12:37:27,781 - src.simulation - INFO - - Underlying Asset Return: -38.4858%
2025-03-03 12:37:27,781 - src.structured_notes - INFO - BUFFERED NOTE CALCULATION:
2025-03-03 12:37:27,781 - src.structured_notes - INFO -   Step 1: Analyze underlying return: -38.4858%
2025-03-03 12:37:27,781 - src.structured_notes - INFO -   Step 2: Negative return detected, applying buffer protection
2025-03-03 12:37:27,781 - src.structured_notes - INFO -     Absolute value of return: |-38.4858%| = 38.4858%
2025-03-03 12:37:27,781 - src.structured_notes - INFO -     Buffer protection level: 10.0000%
2025-03-03 12:37:27,781 - src.structured_notes - INFO -   Step 3: Loss EXCEEDS buffer (38.4858% > 10.0000%)
2025-03-03 12:37:27,781 - src.structured_notes - INFO -     Excess loss beyond buffer: 38.4858% - 10.0000% = 28.4858%
2025-03-03 12:37:27,781 - src.structured_notes - INFO -   Step 4: Final return result: -28.4858%
2025-03-03 12:37:27,781 - src.simulation - INFO - - Final Note Return: -28.4858%
2025-03-03 12:37:27,781 - src.portfolio - DEBUG - Applying returns to portfolio (value: $1,000,000.00)
2025-03-03 12:37:27,781 - src.portfolio - DEBUG -   sp500: $600,000.00 -> $369,085.24 (return: -38.49%)
2025-03-03 12:37:27,781 - src.portfolio - DEBUG -   bonds: $400,000.00 -> $427,455.70 (return: 6.86%)
2025-03-03 12:37:27,781 - src.portfolio - DEBUG - New portfolio value: $796,540.94
2025-03-03 12:37:27,781 - src.retirement - DEBUG - Year 2008: Fixed percentage withdrawal: 4.00% * $796,540.94 = $31,861.64
2025-03-03 12:37:27,781 - src.portfolio - DEBUG -   Withdrew $14,763.41 from sp500
2025-03-03 12:37:27,781 - src.portfolio - DEBUG -   Withdrew $17,098.23 from bonds
2025-03-03 12:37:27,781 - src.portfolio - DEBUG - After withdrawal: $764,679.30
2025-03-03 12:37:27,781 - src.simulation - INFO -   Portfolio 'traditional': $764,679.30 (Return: -23.53%)
2025-03-03 12:37:27,781 - src.portfolio - DEBUG - Rebalancing portfolio (value: $764,679.30)
2025-03-03 12:37:27,781 - src.portfolio - DEBUG -   sp500: $458,807.58 (60.00%)
2025-03-03 12:37:27,781 - src.portfolio - DEBUG -   bonds: $305,871.72 (40.00%)
2025-03-03 12:37:27,781 - src.portfolio - DEBUG - Applying returns to portfolio (value: $1,000,000.00)
2025-03-03 12:37:27,781 - src.portfolio - DEBUG -   sp500: $400,000.00 -> $246,056.83 (return: -38.49%)
2025-03-03 12:37:27,781 - src.portfolio - DEBUG -   bonds: $300,000.00 -> $320,591.77 (return: 6.86%)
2025-03-03 12:37:27,782 - src.portfolio - DEBUG -   notes: $300,000.00 -> $214,542.62 (return: -28.49%)
2025-03-03 12:37:27,782 - src.portfolio - DEBUG - New portfolio value: $781,191.22
2025-03-03 12:37:27,782 - src.retirement - DEBUG - Year 2008: Fixed percentage withdrawal: 4.00% * $781,191.22 = $31,247.65
2025-03-03 12:37:27,782 - src.portfolio - DEBUG -   Withdrew $9,842.27 from sp500
2025-03-03 12:37:27,782 - src.portfolio - DEBUG -   Withdrew $12,823.67 from bonds
2025-03-03 12:37:27,782 - src.portfolio - DEBUG -   Withdrew $8,581.70 from notes
2025-03-03 12:37:27,782 - src.portfolio - DEBUG - After withdrawal: $749,943.57
2025-03-03 12:37:27,782 - src.simulation - INFO -   Portfolio 'structured': $749,943.57 (Return: -25.01%)
2025-03-03 12:37:27,782 - src.portfolio - DEBUG - Rebalancing portfolio (value: $749,943.57)
2025-03-03 12:37:27,782 - src.portfolio - DEBUG -   sp500: $299,977.43 (40.00%)
2025-03-03 12:37:27,782 - src.portfolio - DEBUG -   bonds: $224,983.07 (30.00%)
2025-03-03 12:37:27,782 - src.portfolio - DEBUG -   notes: $224,983.07 (30.00%)
2025-03-03 12:37:27,782 - src.simulation - INFO - Simulating year 2009
2025-03-03 12:37:27,782 - src.simulation - INFO - ===== YEAR 2009 RETURNS =====
2025-03-03 12:37:27,782 - src.simulation - INFO - S&P 500: 23.4542%, Bond: 3.6366%
2025-03-03 12:37:27,782 - src.simulation - INFO - Selecting structured note for year 2009
2025-03-03 12:37:27,782 - src.simulation - INFO - Found 4 notes available for year 2009
2025-03-03 12:37:27,782 - src.simulation - INFO - Target protection level: 10%
2025-03-03 12:37:27,782 - src.simulation - INFO - Found exact match: 10% Buffer, PR: 1.1456
2025-03-03 12:37:27,782 - src.structured_notes - DEBUG - Created structured note: No ID, PR: 1.15, Protection: 0.10, Year: 2009
2025-03-03 12:37:27,782 - src.simulation - INFO - STRUCTURED NOTE: S&P 500 10% Buffer Note (PR: 1.15)
2025-03-03 12:37:27,782 - src.simulation - INFO - - Protection Level: 10.00%
2025-03-03 12:37:27,782 - src.simulation - INFO - - Participation Rate: 1.1456
2025-03-03 12:37:27,782 - src.simulation - INFO - - Protection Type: Buffer
2025-03-03 12:37:27,782 - src.simulation - INFO - - Underlying Asset Return: 23.4542%
2025-03-03 12:37:27,782 - src.structured_notes - INFO - BUFFERED NOTE CALCULATION:
2025-03-03 12:37:27,782 - src.structured_notes - INFO -   Step 1: Analyze underlying return: 23.4542%
2025-03-03 12:37:27,782 - src.structured_notes - INFO -   Step 2: Positive return detected, applying participation rate
2025-03-03 12:37:27,782 - src.structured_notes - INFO -     Calculation: 23.4542% Ã— 1.1456
2025-03-03 12:37:27,782 - src.structured_notes - INFO -   Step 3: Final positive return result: 26.8681%
2025-03-03 12:37:27,782 - src.simulation - INFO - - Final Note Return: 26.8681%
2025-03-03 12:37:27,782 - src.portfolio - DEBUG - Applying returns to portfolio (value: $764,679.30)
2025-03-03 12:37:27,782 - src.portfolio - DEBUG -   sp500: $458,807.58 -> $566,417.19 (return: 23.45%)
2025-03-03 12:37:27,782 - src.portfolio - DEBUG -   bonds: $305,871.72 -> $316,995.13 (return: 3.64%)
2025-03-03 12:37:27,782 - src.portfolio - DEBUG - New portfolio value: $883,412.32
2025-03-03 12:37:27,782 - src.retirement - DEBUG - Year 2009: Fixed percentage withdrawal: 4.00% * $883,412.32 = $35,336.49
2025-03-03 12:37:27,782 - src.portfolio - DEBUG -   Withdrew $22,656.69 from sp500
2025-03-03 12:37:27,782 - src.portfolio - DEBUG -   Withdrew $12,679.81 from bonds
2025-03-03 12:37:27,782 - src.portfolio - DEBUG - After withdrawal: $848,075.82
2025-03-03 12:37:27,782 - src.simulation - INFO -   Portfolio 'traditional': $848,075.82 (Return: 10.91%)
2025-03-03 12:37:27,782 - src.portfolio - DEBUG - Rebalancing portfolio (value: $848,075.82)
2025-03-03 12:37:27,782 - src.portfolio - DEBUG -   sp500: $508,845.49 (60.00%)
2025-03-03 12:37:27,782 - src.portfolio - DEBUG -   bonds: $339,230.33 (40.00%)
2025-03-03 12:37:27,782 - src.portfolio - DEBUG - Applying returns to portfolio (value: $749,943.57)
2025-03-03 12:37:27,782 - src.portfolio - DEBUG -   sp500: $299,977.43 -> $370,334.71 (return: 23.45%)
2025-03-03 12:37:27,782 - src.portfolio - DEBUG -   bonds: $224,983.07 -> $233,164.86 (return: 3.64%)
2025-03-03 12:37:27,782 - src.portfolio - DEBUG -   notes: $224,983.07 -> $285,431.65 (return: 26.87%)
2025-03-03 12:37:27,782 - src.portfolio - DEBUG - New portfolio value: $888,931.22
2025-03-03 12:37:27,782 - src.retirement - DEBUG - Year 2009: Fixed percentage withdrawal: 4.00% * $888,931.22 = $35,557.25
2025-03-03 12:37:27,782 - src.portfolio - DEBUG -   Withdrew $14,813.39 from sp500
2025-03-03 12:37:27,782 - src.portfolio - DEBUG -   Withdrew $9,326.59 from bonds
2025-03-03 12:37:27,782 - src.portfolio - DEBUG -   Withdrew $11,417.27 from notes
2025-03-03 12:37:27,783 - src.portfolio - DEBUG - After withdrawal: $853,373.97
2025-03-03 12:37:27,783 - src.simulation - INFO -   Portfolio 'structured': $853,373.97 (Return: 13.79%)
2025-03-03 12:37:27,783 - src.portfolio - DEBUG - Rebalancing portfolio (value: $853,373.97)
2025-03-03 12:37:27,783 - src.portfolio - DEBUG -   sp500: $341,349.59 (40.00%)
2025-03-03 12:37:27,783 - src.portfolio - DEBUG -   bonds: $256,012.19 (30.00%)
2025-03-03 12:37:27,783 - src.portfolio - DEBUG -   notes: $256,012.19 (30.00%)
2025-03-03 12:37:27,783 - src.simulation - INFO - Simulating year 2010
2025-03-03 12:37:27,783 - src.simulation - INFO - ===== YEAR 2010 RETURNS =====
2025-03-03 12:37:27,783 - src.simulation - INFO - S&P 500: 12.7827%, Bond: 6.1987%
2025-03-03 12:37:27,783 - src.simulation - INFO - Selecting structured note for year 2010
2025-03-03 12:37:27,783 - src.simulation - INFO - Found 4 notes available for year 2010
2025-03-03 12:37:27,783 - src.simulation - INFO - Target protection level: 10%
2025-03-03 12:37:27,783 - src.simulation - INFO - Found exact match: 10% Buffer, PR: 1.0020
2025-03-03 12:37:27,783 - src.structured_notes - DEBUG - Created structured note: No ID, PR: 1.00, Protection: 0.10, Year: 2010
2025-03-03 12:37:27,783 - src.simulation - INFO - STRUCTURED NOTE: S&P 500 10% Buffer Note (PR: 1.00)
2025-03-03 12:37:27,783 - src.simulation - INFO - - Protection Level: 10.00%
2025-03-03 12:37:27,783 - src.simulation - INFO - - Participation Rate: 1.0020
2025-03-03 12:37:27,783 - src.simulation - INFO - - Protection Type: Buffer
2025-03-03 12:37:27,783 - src.simulation - INFO - - Underlying Asset Return: 12.7827%
2025-03-03 12:37:27,783 - src.structured_notes - INFO - BUFFERED NOTE CALCULATION:
2025-03-03 12:37:27,783 - src.structured_notes - INFO -   Step 1: Analyze underlying return: 12.7827%
2025-03-03 12:37:27,783 - src.structured_notes - INFO -   Step 2: Positive return detected, applying participation rate
2025-03-03 12:37:27,783 - src.structured_notes - INFO -     Calculation: 12.7827% Ã— 1.0020
2025-03-03 12:37:27,783 - src.structured_notes - INFO -   Step 3: Final positive return result: 12.8084%
2025-03-03 12:37:27,783 - src.simulation - INFO - - Final Note Return: 12.8084%
2025-03-03 12:37:27,783 - src.portfolio - DEBUG - Applying returns to portfolio (value: $848,075.82)
2025-03-03 12:37:27,783 - src.portfolio - DEBUG -   sp500: $508,845.49 -> $573,889.76 (return: 12.78%)
2025-03-03 12:37:27,783 - src.portfolio - DEBUG -   bonds: $339,230.33 -> $360,258.09 (return: 6.20%)
2025-03-03 12:37:27,783 - src.portfolio - DEBUG - New portfolio value: $934,147.85
2025-03-03 12:37:27,783 - src.retirement - DEBUG - Year 2010: Fixed percentage withdrawal: 4.00% * $934,147.85 = $37,365.91
2025-03-03 12:37:27,783 - src.portfolio - DEBUG -   Withdrew $22,955.59 from sp500
2025-03-03 12:37:27,783 - src.portfolio - DEBUG -   Withdrew $14,410.32 from bonds
2025-03-03 12:37:27,783 - src.portfolio - DEBUG - After withdrawal: $896,781.93
2025-03-03 12:37:27,783 - src.simulation - INFO -   Portfolio 'traditional': $896,781.93 (Return: 5.74%)
2025-03-03 12:37:27,783 - src.portfolio - DEBUG - Rebalancing portfolio (value: $896,781.93)
2025-03-03 12:37:27,783 - src.portfolio - DEBUG -   sp500: $538,069.16 (60.00%)
2025-03-03 12:37:27,783 - src.portfolio - DEBUG -   bonds: $358,712.77 (40.00%)
2025-03-03 12:37:27,783 - src.portfolio - DEBUG - Applying returns to portfolio (value: $853,373.97)
2025-03-03 12:37:27,783 - src.portfolio - DEBUG -   sp500: $341,349.59 -> $384,983.33 (return: 12.78%)
2025-03-03 12:37:27,783 - src.portfolio - DEBUG -   bonds: $256,012.19 -> $271,881.53 (return: 6.20%)
2025-03-03 12:37:27,783 - src.portfolio - DEBUG -   notes: $256,012.19 -> $288,803.16 (return: 12.81%)
2025-03-03 12:37:27,783 - src.portfolio - DEBUG - New portfolio value: $945,668.02
2025-03-03 12:37:27,784 - src.retirement - DEBUG - Year 2010: Fixed percentage withdrawal: 4.00% * $945,668.02 = $37,826.72
2025-03-03 12:37:27,784 - src.portfolio - DEBUG -   Withdrew $15,399.33 from sp500
2025-03-03 12:37:27,784 - src.portfolio - DEBUG -   Withdrew $10,875.26 from bonds
2025-03-03 12:37:27,784 - src.portfolio - DEBUG -   Withdrew $11,552.13 from notes
2025-03-03 12:37:27,784 - src.portfolio - DEBUG - After withdrawal: $907,841.30
2025-03-03 12:37:27,784 - src.simulation - INFO -   Portfolio 'structured': $907,841.30 (Return: 6.38%)
2025-03-03 12:37:27,784 - src.portfolio - DEBUG - Rebalancing portfolio (value: $907,841.30)
2025-03-03 12:37:27,784 - src.portfolio - DEBUG -   sp500: $363,136.52 (40.00%)
2025-03-03 12:37:27,784 - src.portfolio - DEBUG -   bonds: $272,352.39 (30.00%)
2025-03-03 12:37:27,784 - src.portfolio - DEBUG -   notes: $272,352.39 (30.00%)
2025-03-03 12:37:27,784 - src.simulation - INFO - Simulating year 2011
2025-03-03 12:37:27,784 - src.simulation - INFO - ===== YEAR 2011 RETURNS =====
2025-03-03 12:37:27,784 - src.simulation - INFO - S&P 500: -0.0032%, Bond: 7.9297%
2025-03-03 12:37:27,784 - src.simulation - INFO - Selecting structured note for year 2011
2025-03-03 12:37:27,784 - src.simulation - INFO - Found 4 notes available for year 2011
2025-03-03 12:37:27,784 - src.simulation - INFO - Target protection level: 10%
2025-03-03 12:37:27,784 - src.simulation - INFO - Found exact match: 10% Buffer, PR: 0.9857
2025-03-03 12:37:27,784 - src.structured_notes - DEBUG - Created structured note: No ID, PR: 0.99, Protection: 0.10, Year: 2011
2025-03-03 12:37:27,784 - src.simulation - INFO - STRUCTURED NOTE: S&P 500 10% Buffer Note (PR: 0.99)
2025-03-03 12:37:27,784 - src.simulation - INFO - - Protection Level: 10.00%
2025-03-03 12:37:27,784 - src.simulation - INFO - - Participation Rate: 0.9857
2025-03-03 12:37:27,784 - src.simulation - INFO - - Protection Type: Buffer
2025-03-03 12:37:27,784 - src.simulation - INFO - - Underlying Asset Return: -0.0032%
2025-03-03 12:37:27,784 - src.structured_notes - INFO - BUFFERED NOTE CALCULATION:
2025-03-03 12:37:27,784 - src.structured_notes - INFO -   Step 1: Analyze underlying return: -0.0032%
2025-03-03 12:37:27,784 - src.structured_notes - INFO -   Step 2: Negative return detected, applying buffer protection
2025-03-03 12:37:27,784 - src.structured_notes - INFO -     Absolute value of return: |-0.0032%| = 0.0032%
2025-03-03 12:37:27,784 - src.structured_notes - INFO -     Buffer protection level: 10.0000%
2025-03-03 12:37:27,784 - src.structured_notes - INFO -   Step 3: Loss is WITHIN buffer (0.0032% â‰¤ 10.0000%)
2025-03-03 12:37:27,784 - src.structured_notes - INFO -     Full downside protection applies
2025-03-03 12:37:27,784 - src.structured_notes - INFO -   Step 4: Final return result: 0.00%
2025-03-03 12:37:27,784 - src.simulation - INFO - - Final Note Return: 0.0000%
2025-03-03 12:37:27,784 - src.portfolio - DEBUG - Applying returns to portfolio (value: $896,781.93)
2025-03-03 12:37:27,784 - src.portfolio - DEBUG -   sp500: $538,069.16 -> $538,052.03 (return: -0.00%)
2025-03-03 12:37:27,784 - src.portfolio - DEBUG -   bonds: $358,712.77 -> $387,157.52 (return: 7.93%)
2025-03-03 12:37:27,784 - src.portfolio - DEBUG - New portfolio value: $925,209.55
2025-03-03 12:37:27,784 - src.retirement - DEBUG - Year 2011: Fixed percentage withdrawal: 4.00% * $925,209.55 = $37,008.38
2025-03-03 12:37:27,784 - src.portfolio - DEBUG -   Withdrew $21,522.08 from sp500
2025-03-03 12:37:27,784 - src.portfolio - DEBUG -   Withdrew $15,486.30 from bonds
2025-03-03 12:37:27,784 - src.portfolio - DEBUG - After withdrawal: $888,201.16
2025-03-03 12:37:27,784 - src.simulation - INFO -   Portfolio 'traditional': $888,201.16 (Return: -0.96%)
2025-03-03 12:37:27,784 - src.portfolio - DEBUG - Rebalancing portfolio (value: $888,201.16)
2025-03-03 12:37:27,784 - src.portfolio - DEBUG -   sp500: $532,920.70 (60.00%)
2025-03-03 12:37:27,784 - src.portfolio - DEBUG -   bonds: $355,280.47 (40.00%)
2025-03-03 12:37:27,784 - src.portfolio - DEBUG - Applying returns to portfolio (value: $907,841.30)
2025-03-03 12:37:27,784 - src.portfolio - DEBUG -   sp500: $363,136.52 -> $363,124.96 (return: -0.00%)
2025-03-03 12:37:27,784 - src.portfolio - DEBUG -   bonds: $272,352.39 -> $293,949.04 (return: 7.93%)
2025-03-03 12:37:27,784 - src.portfolio - DEBUG -   notes: $272,352.39 -> $272,352.39 (return: 0.00%)
2025-03-03 12:37:27,784 - src.portfolio - DEBUG - New portfolio value: $929,426.39
2025-03-03 12:37:27,784 - src.retirement - DEBUG - Year 2011: Fixed percentage withdrawal: 4.00% * $929,426.39 = $37,177.06
2025-03-03 12:37:27,784 - src.portfolio - DEBUG -   Withdrew $14,525.00 from sp500
2025-03-03 12:37:27,785 - src.portfolio - DEBUG -   Withdrew $11,757.96 from bonds
2025-03-03 12:37:27,785 - src.portfolio - DEBUG -   Withdrew $10,894.10 from notes
2025-03-03 12:37:27,785 - src.portfolio - DEBUG - After withdrawal: $892,249.33
2025-03-03 12:37:27,785 - src.simulation - INFO -   Portfolio 'structured': $892,249.33 (Return: -1.72%)
2025-03-03 12:37:27,785 - src.portfolio - DEBUG - Rebalancing portfolio (value: $892,249.33)
2025-03-03 12:37:27,785 - src.portfolio - DEBUG -   sp500: $356,899.73 (40.00%)
2025-03-03 12:37:27,785 - src.portfolio - DEBUG -   bonds: $267,674.80 (30.00%)
2025-03-03 12:37:27,785 - src.portfolio - DEBUG -   notes: $267,674.80 (30.00%)
2025-03-03 12:37:27,785 - src.simulation - INFO - Simulating year 2012
2025-03-03 12:37:27,785 - src.simulation - INFO - ===== YEAR 2012 RETURNS =====
2025-03-03 12:37:27,785 - src.simulation - INFO - S&P 500: 13.4057%, Bond: 2.9409%
2025-03-03 12:37:27,785 - src.simulation - INFO - Selecting structured note for year 2012
2025-03-03 12:37:27,785 - src.simulation - INFO - Found 4 notes available for year 2012
2025-03-03 12:37:27,785 - src.simulation - INFO - Target protection level: 10%
2025-03-03 12:37:27,785 - src.simulation - INFO - Found exact match: 10% Buffer, PR: 1.0441
2025-03-03 12:37:27,785 - src.structured_notes - DEBUG - Created structured note: No ID, PR: 1.04, Protection: 0.10, Year: 2012
2025-03-03 12:37:27,785 - src.simulation - INFO - STRUCTURED NOTE: S&P 500 10% Buffer Note (PR: 1.04)
2025-03-03 12:37:27,785 - src.simulation - INFO - - Protection Level: 10.00%
2025-03-03 12:37:27,785 - src.simulation - INFO - - Participation Rate: 1.0441
2025-03-03 12:37:27,785 - src.simulation - INFO - - Protection Type: Buffer
2025-03-03 12:37:27,785 - src.simulation - INFO - - Underlying Asset Return: 13.4057%
2025-03-03 12:37:27,785 - src.structured_notes - INFO - BUFFERED NOTE CALCULATION:
2025-03-03 12:37:27,785 - src.structured_notes - INFO -   Step 1: Analyze underlying return: 13.4057%
2025-03-03 12:37:27,785 - src.structured_notes - INFO -   Step 2: Positive return detected, applying participation rate
2025-03-03 12:37:27,785 - src.structured_notes - INFO -     Calculation: 13.4057% Ã— 1.0441
2025-03-03 12:37:27,785 - src.structured_notes - INFO -   Step 3: Final positive return result: 13.9971%
2025-03-03 12:37:27,785 - src.simulation - INFO - - Final Note Return: 13.9971%
2025-03-03 12:37:27,785 - src.portfolio - DEBUG - Applying returns to portfolio (value: $888,201.16)
2025-03-03 12:37:27,785 - src.portfolio - DEBUG -   sp500: $532,920.70 -> $604,362.40 (return: 13.41%)
2025-03-03 12:37:27,785 - src.portfolio - DEBUG -   bonds: $355,280.47 -> $365,729.07 (return: 2.94%)
2025-03-03 12:37:27,785 - src.portfolio - DEBUG - New portfolio value: $970,091.47
2025-03-03 12:37:27,785 - src.retirement - DEBUG - Year 2012: Fixed percentage withdrawal: 4.00% * $970,091.47 = $38,803.66
2025-03-03 12:37:27,785 - src.portfolio - DEBUG -   Withdrew $24,174.50 from sp500
2025-03-03 12:37:27,785 - src.portfolio - DEBUG -   Withdrew $14,629.16 from bonds
2025-03-03 12:37:27,785 - src.portfolio - DEBUG - After withdrawal: $931,287.81
2025-03-03 12:37:27,785 - src.simulation - INFO -   Portfolio 'traditional': $931,287.81 (Return: 4.85%)
2025-03-03 12:37:27,785 - src.portfolio - DEBUG - Rebalancing portfolio (value: $931,287.81)
2025-03-03 12:37:27,785 - src.portfolio - DEBUG -   sp500: $558,772.69 (60.00%)
2025-03-03 12:37:27,785 - src.portfolio - DEBUG -   bonds: $372,515.13 (40.00%)
2025-03-03 12:37:27,785 - src.portfolio - DEBUG - Applying returns to portfolio (value: $892,249.33)
2025-03-03 12:37:27,785 - src.portfolio - DEBUG -   sp500: $356,899.73 -> $404,744.61 (return: 13.41%)
2025-03-03 12:37:27,785 - src.portfolio - DEBUG -   bonds: $267,674.80 -> $275,546.97 (return: 2.94%)
2025-03-03 12:37:27,785 - src.portfolio - DEBUG -   notes: $267,674.80 -> $305,141.41 (return: 14.00%)
2025-03-03 12:37:27,785 - src.portfolio - DEBUG - New portfolio value: $985,433.00
2025-03-03 12:37:27,785 - src.retirement - DEBUG - Year 2012: Fixed percentage withdrawal: 4.00% * $985,433.00 = $39,417.32
2025-03-03 12:37:27,785 - src.portfolio - DEBUG -   Withdrew $16,189.78 from sp500
2025-03-03 12:37:27,785 - src.portfolio - DEBUG -   Withdrew $11,021.88 from bonds
2025-03-03 12:37:27,785 - src.portfolio - DEBUG -   Withdrew $12,205.66 from notes
2025-03-03 12:37:27,785 - src.portfolio - DEBUG - After withdrawal: $946,015.68
2025-03-03 12:37:27,786 - src.simulation - INFO -   Portfolio 'structured': $946,015.68 (Return: 6.03%)
2025-03-03 12:37:27,786 - src.portfolio - DEBUG - Rebalancing portfolio (value: $946,015.68)
2025-03-03 12:37:27,786 - src.portfolio - DEBUG -   sp500: $378,406.27 (40.00%)
2025-03-03 12:37:27,786 - src.portfolio - DEBUG -   bonds: $283,804.70 (30.00%)
2025-03-03 12:37:27,786 - src.portfolio - DEBUG -   notes: $283,804.70 (30.00%)
2025-03-03 12:37:27,786 - src.simulation - INFO - Simulating year 2013
2025-03-03 12:37:27,786 - src.simulation - INFO - ===== YEAR 2013 RETURNS =====
2025-03-03 12:37:27,786 - src.simulation - INFO - S&P 500: 29.6012%, Bond: -2.1075%
2025-03-03 12:37:27,786 - src.simulation - INFO - Selecting structured note for year 2013
2025-03-03 12:37:27,786 - src.simulation - INFO - Found 4 notes available for year 2013
2025-03-03 12:37:27,786 - src.simulation - INFO - Target protection level: 10%
2025-03-03 12:37:27,786 - src.simulation - INFO - Found exact match: 10% Buffer, PR: 1.0571
2025-03-03 12:37:27,786 - src.structured_notes - DEBUG - Created structured note: No ID, PR: 1.06, Protection: 0.10, Year: 2013
2025-03-03 12:37:27,786 - src.simulation - INFO - STRUCTURED NOTE: S&P 500 10% Buffer Note (PR: 1.06)
2025-03-03 12:37:27,786 - src.simulation - INFO - - Protection Level: 10.00%
2025-03-03 12:37:27,786 - src.simulation - INFO - - Participation Rate: 1.0571
2025-03-03 12:37:27,786 - src.simulation - INFO - - Protection Type: Buffer
2025-03-03 12:37:27,786 - src.simulation - INFO - - Underlying Asset Return: 29.6012%
2025-03-03 12:37:27,786 - src.structured_notes - INFO - BUFFERED NOTE CALCULATION:
2025-03-03 12:37:27,786 - src.structured_notes - INFO -   Step 1: Analyze underlying return: 29.6012%
2025-03-03 12:37:27,786 - src.structured_notes - INFO -   Step 2: Positive return detected, applying participation rate
2025-03-03 12:37:27,786 - src.structured_notes - INFO -     Calculation: 29.6012% Ã— 1.0571
2025-03-03 12:37:27,786 - src.structured_notes - INFO -   Step 3: Final positive return result: 31.2905%
2025-03-03 12:37:27,786 - src.simulation - INFO - - Final Note Return: 31.2905%
2025-03-03 12:37:27,786 - src.portfolio - DEBUG - Applying returns to portfolio (value: $931,287.81)
2025-03-03 12:37:27,786 - src.portfolio - DEBUG -   sp500: $558,772.69 -> $724,176.39 (return: 29.60%)
2025-03-03 12:37:27,786 - src.portfolio - DEBUG -   bonds: $372,515.13 -> $364,664.49 (return: -2.11%)
2025-03-03 12:37:27,786 - src.portfolio - DEBUG - New portfolio value: $1,088,840.88
2025-03-03 12:37:27,786 - src.retirement - DEBUG - Year 2013: Fixed percentage withdrawal: 4.00% * $1,088,840.88 = $43,553.64
2025-03-03 12:37:27,786 - src.portfolio - DEBUG -   Withdrew $28,967.06 from sp500
2025-03-03 12:37:27,786 - src.portfolio - DEBUG -   Withdrew $14,586.58 from bonds
2025-03-03 12:37:27,786 - src.portfolio - DEBUG - After withdrawal: $1,045,287.24
2025-03-03 12:37:27,786 - src.simulation - INFO -   Portfolio 'traditional': $1,045,287.24 (Return: 12.24%)
2025-03-03 12:37:27,786 - src.portfolio - DEBUG - Rebalancing portfolio (value: $1,045,287.24)
2025-03-03 12:37:27,786 - src.portfolio - DEBUG -   sp500: $627,172.34 (60.00%)
2025-03-03 12:37:27,786 - src.portfolio - DEBUG -   bonds: $418,114.90 (40.00%)
2025-03-03 12:37:27,786 - src.portfolio - DEBUG - Applying returns to portfolio (value: $946,015.68)
2025-03-03 12:37:27,786 - src.portfolio - DEBUG -   sp500: $378,406.27 -> $490,419.25 (return: 29.60%)
2025-03-03 12:37:27,786 - src.portfolio - DEBUG -   bonds: $283,804.70 -> $277,823.61 (return: -2.11%)
2025-03-03 12:37:27,786 - src.portfolio - DEBUG -   notes: $283,804.70 -> $372,608.48 (return: 31.29%)
2025-03-03 12:37:27,786 - src.portfolio - DEBUG - New portfolio value: $1,140,851.35
2025-03-03 12:37:27,786 - src.retirement - DEBUG - Year 2013: Fixed percentage withdrawal: 4.00% * $1,140,851.35 = $45,634.05
2025-03-03 12:37:27,786 - src.portfolio - DEBUG -   Withdrew $19,616.77 from sp500
2025-03-03 12:37:27,786 - src.portfolio - DEBUG -   Withdrew $11,112.94 from bonds
2025-03-03 12:37:27,786 - src.portfolio - DEBUG -   Withdrew $14,904.34 from notes
2025-03-03 12:37:27,786 - src.portfolio - DEBUG - After withdrawal: $1,095,217.29
2025-03-03 12:37:27,786 - src.simulation - INFO -   Portfolio 'structured': $1,095,217.29 (Return: 15.77%)
2025-03-03 12:37:27,786 - src.portfolio - DEBUG - Rebalancing portfolio (value: $1,095,217.29)
2025-03-03 12:37:27,787 - src.portfolio - DEBUG -   sp500: $438,086.92 (40.00%)
2025-03-03 12:37:27,787 - src.portfolio - DEBUG -   bonds: $328,565.19 (30.00%)
2025-03-03 12:37:27,787 - src.portfolio - DEBUG -   notes: $328,565.19 (30.00%)
2025-03-03 12:37:27,787 - src.simulation - INFO - Simulating year 2014
2025-03-03 12:37:27,787 - src.simulation - INFO - ===== YEAR 2014 RETURNS =====
2025-03-03 12:37:27,787 - src.simulation - INFO - S&P 500: 11.3906%, Bond: 5.8179%
2025-03-03 12:37:27,787 - src.simulation - INFO - Selecting structured note for year 2014
2025-03-03 12:37:27,787 - src.simulation - INFO - Found 4 notes available for year 2014
2025-03-03 12:37:27,787 - src.simulation - INFO - Target protection level: 10%
2025-03-03 12:37:27,787 - src.simulation - INFO - Found exact match: 10% Buffer, PR: 1.0015
2025-03-03 12:37:27,787 - src.structured_notes - DEBUG - Created structured note: No ID, PR: 1.00, Protection: 0.10, Year: 2014
2025-03-03 12:37:27,787 - src.simulation - INFO - STRUCTURED NOTE: S&P 500 10% Buffer Note (PR: 1.00)
2025-03-03 12:37:27,787 - src.simulation - INFO - - Protection Level: 10.00%
2025-03-03 12:37:27,787 - src.simulation - INFO - - Participation Rate: 1.0015
2025-03-03 12:37:27,787 - src.simulation - INFO - - Protection Type: Buffer
2025-03-03 12:37:27,787 - src.simulation - INFO - - Underlying Asset Return: 11.3906%
2025-03-03 12:37:27,787 - src.structured_notes - INFO - BUFFERED NOTE CALCULATION:
2025-03-03 12:37:27,787 - src.structured_notes - INFO -   Step 1: Analyze underlying return: 11.3906%
2025-03-03 12:37:27,787 - src.structured_notes - INFO -   Step 2: Positive return detected, applying participation rate
2025-03-03 12:37:27,787 - src.structured_notes - INFO -     Calculation: 11.3906% Ã— 1.0015
2025-03-03 12:37:27,787 - src.structured_notes - INFO -   Step 3: Final positive return result: 11.4073%
2025-03-03 12:37:27,787 - src.simulation - INFO - - Final Note Return: 11.4073%
2025-03-03 12:37:27,787 - src.portfolio - DEBUG - Applying returns to portfolio (value: $1,045,287.24)
2025-03-03 12:37:27,787 - src.portfolio - DEBUG -   sp500: $627,172.34 -> $698,611.25 (return: 11.39%)
2025-03-03 12:37:27,787 - src.portfolio - DEBUG -   bonds: $418,114.90 -> $442,440.22 (return: 5.82%)
2025-03-03 12:37:27,787 - src.portfolio - DEBUG - New portfolio value: $1,141,051.47
2025-03-03 12:37:27,787 - src.retirement - DEBUG - Year 2014: Fixed percentage withdrawal: 4.00% * $1,141,051.47 = $45,642.06
2025-03-03 12:37:27,787 - src.portfolio - DEBUG -   Withdrew $27,944.45 from sp500
2025-03-03 12:37:27,787 - src.portfolio - DEBUG -   Withdrew $17,697.61 from bonds
2025-03-03 12:37:27,787 - src.portfolio - DEBUG - After withdrawal: $1,095,409.41
2025-03-03 12:37:27,787 - src.simulation - INFO -   Portfolio 'traditional': $1,095,409.41 (Return: 4.80%)
2025-03-03 12:37:27,787 - src.portfolio - DEBUG - Rebalancing portfolio (value: $1,095,409.41)
2025-03-03 12:37:27,787 - src.portfolio - DEBUG -   sp500: $657,245.65 (60.00%)
2025-03-03 12:37:27,787 - src.portfolio - DEBUG -   bonds: $438,163.76 (40.00%)
2025-03-03 12:37:27,787 - src.portfolio - DEBUG - Applying returns to portfolio (value: $1,095,217.29)
2025-03-03 12:37:27,787 - src.portfolio - DEBUG -   sp500: $438,086.92 -> $487,987.79 (return: 11.39%)
2025-03-03 12:37:27,787 - src.portfolio - DEBUG -   bonds: $328,565.19 -> $347,680.64 (return: 5.82%)
2025-03-03 12:37:27,787 - src.portfolio - DEBUG -   notes: $328,565.19 -> $366,045.58 (return: 11.41%)
2025-03-03 12:37:27,787 - src.portfolio - DEBUG - New portfolio value: $1,201,714.02
2025-03-03 12:37:27,787 - src.retirement - DEBUG - Year 2014: Fixed percentage withdrawal: 4.00% * $1,201,714.02 = $48,068.56
2025-03-03 12:37:27,787 - src.portfolio - DEBUG -   Withdrew $19,519.51 from sp500
2025-03-03 12:37:27,787 - src.portfolio - DEBUG -   Withdrew $13,907.23 from bonds
2025-03-03 12:37:27,787 - src.portfolio - DEBUG -   Withdrew $14,641.82 from notes
2025-03-03 12:37:27,787 - src.portfolio - DEBUG - After withdrawal: $1,153,645.46
2025-03-03 12:37:27,787 - src.simulation - INFO -   Portfolio 'structured': $1,153,645.46 (Return: 5.33%)
2025-03-03 12:37:27,787 - src.portfolio - DEBUG - Rebalancing portfolio (value: $1,153,645.46)
2025-03-03 12:37:27,787 - src.portfolio - DEBUG -   sp500: $461,458.18 (40.00%)
2025-03-03 12:37:27,787 - src.portfolio - DEBUG -   bonds: $346,093.64 (30.00%)
2025-03-03 12:37:27,787 - src.portfolio - DEBUG -   notes: $346,093.64 (30.00%)
2025-03-03 12:37:27,787 - src.simulation - INFO - Simulating year 2015
2025-03-03 12:37:27,787 - src.simulation - INFO - ===== YEAR 2015 RETURNS =====
2025-03-03 12:37:27,787 - src.simulation - INFO - S&P 500: -0.7266%, Bond: 0.5590%
2025-03-03 12:37:27,787 - src.simulation - INFO - Selecting structured note for year 2015
2025-03-03 12:37:27,788 - src.simulation - INFO - Found 4 notes available for year 2015
2025-03-03 12:37:27,788 - src.simulation - INFO - Target protection level: 10%
2025-03-03 12:37:27,788 - src.simulation - INFO - Found exact match: 10% Buffer, PR: 1.0073
2025-03-03 12:37:27,788 - src.structured_notes - DEBUG - Created structured note: No ID, PR: 1.01, Protection: 0.10, Year: 2015
2025-03-03 12:37:27,788 - src.simulation - INFO - STRUCTURED NOTE: S&P 500 10% Buffer Note (PR: 1.01)
2025-03-03 12:37:27,788 - src.simulation - INFO - - Protection Level: 10.00%
2025-03-03 12:37:27,788 - src.simulation - INFO - - Participation Rate: 1.0073
2025-03-03 12:37:27,788 - src.simulation - INFO - - Protection Type: Buffer
2025-03-03 12:37:27,788 - src.simulation - INFO - - Underlying Asset Return: -0.7266%
2025-03-03 12:37:27,788 - src.structured_notes - INFO - BUFFERED NOTE CALCULATION:
2025-03-03 12:37:27,788 - src.structured_notes - INFO -   Step 1: Analyze underlying return: -0.7266%
2025-03-03 12:37:27,788 - src.structured_notes - INFO -   Step 2: Negative return detected, applying buffer protection
2025-03-03 12:37:27,788 - src.structured_notes - INFO -     Absolute value of return: |-0.7266%| = 0.7266%
2025-03-03 12:37:27,788 - src.structured_notes - INFO -     Buffer protection level: 10.0000%
2025-03-03 12:37:27,788 - src.structured_notes - INFO -   Step 3: Loss is WITHIN buffer (0.7266% â‰¤ 10.0000%)
2025-03-03 12:37:27,788 - src.structured_notes - INFO -     Full downside protection applies
2025-03-03 12:37:27,788 - src.structured_notes - INFO -   Step 4: Final return result: 0.00%
2025-03-03 12:37:27,788 - src.simulation - INFO - - Final Note Return: 0.0000%
2025-03-03 12:37:27,788 - src.portfolio - DEBUG - Applying returns to portfolio (value: $1,095,409.41)
2025-03-03 12:37:27,788 - src.portfolio - DEBUG -   sp500: $657,245.65 -> $652,470.10 (return: -0.73%)
2025-03-03 12:37:27,788 - src.portfolio - DEBUG -   bonds: $438,163.76 -> $440,612.91 (return: 0.56%)
2025-03-03 12:37:27,788 - src.portfolio - DEBUG - New portfolio value: $1,093,083.01
2025-03-03 12:37:27,788 - src.retirement - DEBUG - Year 2015: Fixed percentage withdrawal: 4.00% * $1,093,083.01 = $43,723.32
2025-03-03 12:37:27,788 - src.portfolio - DEBUG -   Withdrew $26,098.80 from sp500
2025-03-03 12:37:27,788 - src.portfolio - DEBUG -   Withdrew $17,624.52 from bonds
2025-03-03 12:37:27,788 - src.portfolio - DEBUG - After withdrawal: $1,049,359.69
2025-03-03 12:37:27,788 - src.simulation - INFO -   Portfolio 'traditional': $1,049,359.69 (Return: -4.20%)
2025-03-03 12:37:27,788 - src.portfolio - DEBUG - Rebalancing portfolio (value: $1,049,359.69)
2025-03-03 12:37:27,788 - src.portfolio - DEBUG -   sp500: $629,615.81 (60.00%)
2025-03-03 12:37:27,788 - src.portfolio - DEBUG -   bonds: $419,743.88 (40.00%)
2025-03-03 12:37:27,789 - src.portfolio - DEBUG - Applying returns to portfolio (value: $1,153,645.46)
2025-03-03 12:37:27,789 - src.portfolio - DEBUG -   sp500: $461,458.18 -> $458,105.23 (return: -0.73%)
2025-03-03 12:37:27,789 - src.portfolio - DEBUG -   bonds: $346,093.64 -> $348,028.15 (return: 0.56%)
2025-03-03 12:37:27,789 - src.portfolio - DEBUG -   notes: $346,093.64 -> $346,093.64 (return: 0.00%)
2025-03-03 12:37:27,789 - src.portfolio - DEBUG - New portfolio value: $1,152,227.02
2025-03-03 12:37:27,789 - src.retirement - DEBUG - Year 2015: Fixed percentage withdrawal: 4.00% * $1,152,227.02 = $46,089.08
2025-03-03 12:37:27,789 - src.portfolio - DEBUG -   Withdrew $18,324.21 from sp500
2025-03-03 12:37:27,789 - src.portfolio - DEBUG -   Withdrew $13,921.13 from bonds
2025-03-03 12:37:27,789 - src.portfolio - DEBUG -   Withdrew $13,843.75 from notes
2025-03-03 12:37:27,789 - src.portfolio - DEBUG - After withdrawal: $1,106,137.93
2025-03-03 12:37:27,789 - src.simulation - INFO -   Portfolio 'structured': $1,106,137.93 (Return: -4.12%)
2025-03-03 12:37:27,789 - src.portfolio - DEBUG - Rebalancing portfolio (value: $1,106,137.93)
2025-03-03 12:37:27,789 - src.portfolio - DEBUG -   sp500: $442,455.17 (40.00%)
2025-03-03 12:37:27,789 - src.portfolio - DEBUG -   bonds: $331,841.38 (30.00%)
2025-03-03 12:37:27,789 - src.portfolio - DEBUG -   notes: $331,841.38 (30.00%)
2025-03-03 12:37:27,789 - src.simulation - INFO - Simulating year 2016
2025-03-03 12:37:27,789 - src.simulation - INFO - ===== YEAR 2016 RETURNS =====
2025-03-03 12:37:27,789 - src.simulation - INFO - S&P 500: 9.5350%, Bond: 2.5215%
2025-03-03 12:37:27,789 - src.simulation - INFO - Selecting structured note for year 2016
2025-03-03 12:37:27,789 - src.simulation - INFO - Found 4 notes available for year 2016
2025-03-03 12:37:27,789 - src.simulation - INFO - Target protection level: 10%
2025-03-03 12:37:27,789 - src.simulation - INFO - Found exact match: 10% Buffer, PR: 1.0200
2025-03-03 12:37:27,789 - src.structured_notes - DEBUG - Created structured note: No ID, PR: 1.02, Protection: 0.10, Year: 2016
2025-03-03 12:37:27,789 - src.simulation - INFO - STRUCTURED NOTE: S&P 500 10% Buffer Note (PR: 1.02)
2025-03-03 12:37:27,789 - src.simulation - INFO - - Protection Level: 10.00%
2025-03-03 12:37:27,789 - src.simulation - INFO - - Participation Rate: 1.0200
2025-03-03 12:37:27,789 - src.simulation - INFO - - Protection Type: Buffer
2025-03-03 12:37:27,789 - src.simulation - INFO - - Underlying Asset Return: 9.5350%
2025-03-03 12:37:27,789 - src.structured_notes - INFO - BUFFERED NOTE CALCULATION:
2025-03-03 12:37:27,789 - src.structured_notes - INFO -   Step 1: Analyze underlying return: 9.5350%
2025-03-03 12:37:27,789 - src.structured_notes - INFO -   Step 2: Positive return detected, applying participation rate
2025-03-03 12:37:27,789 - src.structured_notes - INFO -     Calculation: 9.5350% Ã— 1.0200
2025-03-03 12:37:27,789 - src.structured_notes - INFO -   Step 3: Final positive return result: 9.7262%
2025-03-03 12:37:27,789 - src.simulation - INFO - - Final Note Return: 9.7262%
2025-03-03 12:37:27,789 - src.portfolio - DEBUG - Applying returns to portfolio (value: $1,049,359.69)
2025-03-03 12:37:27,789 - src.portfolio - DEBUG -   sp500: $629,615.81 -> $689,649.83 (return: 9.54%)
2025-03-03 12:37:27,789 - src.portfolio - DEBUG -   bonds: $419,743.88 -> $430,327.92 (return: 2.52%)
2025-03-03 12:37:27,789 - src.portfolio - DEBUG - New portfolio value: $1,119,977.75
2025-03-03 12:37:27,789 - src.retirement - DEBUG - Year 2016: Fixed percentage withdrawal: 4.00% * $1,119,977.75 = $44,799.11
2025-03-03 12:37:27,789 - src.portfolio - DEBUG -   Withdrew $27,585.99 from sp500
2025-03-03 12:37:27,789 - src.portfolio - DEBUG -   Withdrew $17,213.12 from bonds
2025-03-03 12:37:27,789 - src.portfolio - DEBUG - After withdrawal: $1,075,178.64
2025-03-03 12:37:27,789 - src.simulation - INFO -   Portfolio 'traditional': $1,075,178.64 (Return: 2.46%)
2025-03-03 12:37:27,789 - src.portfolio - DEBUG - Rebalancing portfolio (value: $1,075,178.64)
2025-03-03 12:37:27,789 - src.portfolio - DEBUG -   sp500: $645,107.18 (60.00%)
2025-03-03 12:37:27,789 - src.portfolio - DEBUG -   bonds: $430,071.46 (40.00%)
2025-03-03 12:37:27,789 - src.portfolio - DEBUG - Applying returns to portfolio (value: $1,106,137.93)
2025-03-03 12:37:27,789 - src.portfolio - DEBUG -   sp500: $442,455.17 -> $484,643.37 (return: 9.54%)
2025-03-03 12:37:27,789 - src.portfolio - DEBUG -   bonds: $331,841.38 -> $340,208.92 (return: 2.52%)
2025-03-03 12:37:27,789 - src.portfolio - DEBUG -   notes: $331,841.38 -> $364,116.92 (return: 9.73%)
2025-03-03 12:37:27,789 - src.portfolio - DEBUG - New portfolio value: $1,188,969.21
2025-03-03 12:37:27,789 - src.retirement - DEBUG - Year 2016: Fixed percentage withdrawal: 4.00% * $1,188,969.21 = $47,558.77
2025-03-03 12:37:27,789 - src.portfolio - DEBUG -   Withdrew $19,385.73 from sp500
2025-03-03 12:37:27,790 - src.portfolio - DEBUG -   Withdrew $13,608.36 from bonds
2025-03-03 12:37:27,790 - src.portfolio - DEBUG -   Withdrew $14,564.68 from notes
2025-03-03 12:37:27,790 - src.portfolio - DEBUG - After withdrawal: $1,141,410.45
2025-03-03 12:37:27,790 - src.simulation - INFO -   Portfolio 'structured': $1,141,410.45 (Return: 3.19%)
2025-03-03 12:37:27,790 - src.portfolio - DEBUG - Rebalancing portfolio (value: $1,141,410.45)
2025-03-03 12:37:27,790 - src.portfolio - DEBUG -   sp500: $456,564.18 (40.00%)
2025-03-03 12:37:27,790 - src.portfolio - DEBUG -   bonds: $342,423.13 (30.00%)
2025-03-03 12:37:27,790 - src.portfolio - DEBUG -   notes: $342,423.13 (30.00%)
2025-03-03 12:37:27,790 - src.simulation - INFO - Simulating year 2017
2025-03-03 12:37:27,790 - src.simulation - INFO - ===== YEAR 2017 RETURNS =====
2025-03-03 12:37:27,790 - src.simulation - INFO - S&P 500: 19.4200%, Bond: 3.9995%
2025-03-03 12:37:27,790 - src.simulation - INFO - Selecting structured note for year 2017
2025-03-03 12:37:27,790 - src.simulation - INFO - Found 4 notes available for year 2017
2025-03-03 12:37:27,790 - src.simulation - INFO - Target protection level: 10%
2025-03-03 12:37:27,790 - src.simulation - INFO - Found exact match: 10% Buffer, PR: 1.0603
2025-03-03 12:37:27,790 - src.structured_notes - DEBUG - Created structured note: No ID, PR: 1.06, Protection: 0.10, Year: 2017
2025-03-03 12:37:27,790 - src.simulation - INFO - STRUCTURED NOTE: S&P 500 10% Buffer Note (PR: 1.06)
2025-03-03 12:37:27,790 - src.simulation - INFO - - Protection Level: 10.00%
2025-03-03 12:37:27,790 - src.simulation - INFO - - Participation Rate: 1.0603
2025-03-03 12:37:27,790 - src.simulation - INFO - - Protection Type: Buffer
2025-03-03 12:37:27,790 - src.simulation - INFO - - Underlying Asset Return: 19.4200%
2025-03-03 12:37:27,790 - src.structured_notes - INFO - BUFFERED NOTE CALCULATION:
2025-03-03 12:37:27,790 - src.structured_notes - INFO -   Step 1: Analyze underlying return: 19.4200%
2025-03-03 12:37:27,790 - src.structured_notes - INFO -   Step 2: Positive return detected, applying participation rate
2025-03-03 12:37:27,790 - src.structured_notes - INFO -     Calculation: 19.4200% Ã— 1.0603
2025-03-03 12:37:27,790 - src.structured_notes - INFO -   Step 3: Final positive return result: 20.5912%
2025-03-03 12:37:27,790 - src.simulation - INFO - - Final Note Return: 20.5912%
2025-03-03 12:37:27,790 - src.portfolio - DEBUG - Applying returns to portfolio (value: $1,075,178.64)
2025-03-03 12:37:27,790 - src.portfolio - DEBUG -   sp500: $645,107.18 -> $770,386.78 (return: 19.42%)
2025-03-03 12:37:27,790 - src.portfolio - DEBUG -   bonds: $430,071.46 -> $447,272.02 (return: 4.00%)
2025-03-03 12:37:27,790 - src.portfolio - DEBUG - New portfolio value: $1,217,658.79
2025-03-03 12:37:27,790 - src.retirement - DEBUG - Year 2017: Fixed percentage withdrawal: 4.00% * $1,217,658.79 = $48,706.35
2025-03-03 12:37:27,790 - src.portfolio - DEBUG -   Withdrew $30,815.47 from sp500
2025-03-03 12:37:27,790 - src.portfolio - DEBUG -   Withdrew $17,890.88 from bonds
2025-03-03 12:37:27,790 - src.portfolio - DEBUG - After withdrawal: $1,168,952.44
2025-03-03 12:37:27,790 - src.simulation - INFO -   Portfolio 'traditional': $1,168,952.44 (Return: 8.72%)
2025-03-03 12:37:27,790 - src.portfolio - DEBUG - Rebalancing portfolio (value: $1,168,952.44)
2025-03-03 12:37:27,790 - src.portfolio - DEBUG -   sp500: $701,371.46 (60.00%)
2025-03-03 12:37:27,790 - src.portfolio - DEBUG -   bonds: $467,580.98 (40.00%)
2025-03-03 12:37:27,790 - src.portfolio - DEBUG - Applying returns to portfolio (value: $1,141,410.45)
2025-03-03 12:37:27,790 - src.portfolio - DEBUG -   sp500: $456,564.18 -> $545,228.78 (return: 19.42%)
2025-03-03 12:37:27,790 - src.portfolio - DEBUG -   bonds: $342,423.13 -> $356,118.23 (return: 4.00%)
2025-03-03 12:37:27,790 - src.portfolio - DEBUG -   notes: $342,423.13 -> $412,932.02 (return: 20.59%)
2025-03-03 12:37:27,790 - src.portfolio - DEBUG - New portfolio value: $1,314,279.03
2025-03-03 12:37:27,790 - src.retirement - DEBUG - Year 2017: Fixed percentage withdrawal: 4.00% * $1,314,279.03 = $52,571.16
2025-03-03 12:37:27,790 - src.portfolio - DEBUG -   Withdrew $21,809.15 from sp500
2025-03-03 12:37:27,790 - src.portfolio - DEBUG -   Withdrew $14,244.73 from bonds
2025-03-03 12:37:27,790 - src.portfolio - DEBUG -   Withdrew $16,517.28 from notes
2025-03-03 12:37:27,790 - src.portfolio - DEBUG - After withdrawal: $1,261,707.87
2025-03-03 12:37:27,790 - src.simulation - INFO -   Portfolio 'structured': $1,261,707.87 (Return: 10.54%)
2025-03-03 12:37:27,790 - src.portfolio - DEBUG - Rebalancing portfolio (value: $1,261,707.87)
2025-03-03 12:37:27,790 - src.portfolio - DEBUG -   sp500: $504,683.15 (40.00%)
2025-03-03 12:37:27,790 - src.portfolio - DEBUG -   bonds: $378,512.36 (30.00%)
2025-03-03 12:37:27,790 - src.portfolio - DEBUG -   notes: $378,512.36 (30.00%)
2025-03-03 12:37:27,790 - src.simulation - INFO - Simulating year 2018
2025-03-03 12:37:27,790 - src.simulation - INFO - ===== YEAR 2018 RETURNS =====
2025-03-03 12:37:27,791 - src.simulation - INFO - S&P 500: -6.2373%, Bond: 0.1159%
2025-03-03 12:37:27,791 - src.simulation - INFO - Selecting structured note for year 2018
2025-03-03 12:37:27,791 - src.simulation - INFO - Found 4 notes available for year 2018
2025-03-03 12:37:27,791 - src.simulation - INFO - Target protection level: 10%
2025-03-03 12:37:27,791 - src.simulation - INFO - Found exact match: 10% Buffer, PR: 0.9529
2025-03-03 12:37:27,791 - src.structured_notes - DEBUG - Created structured note: No ID, PR: 0.95, Protection: 0.10, Year: 2018
2025-03-03 12:37:27,791 - src.simulation - INFO - STRUCTURED NOTE: S&P 500 10% Buffer Note (PR: 0.95)
2025-03-03 12:37:27,791 - src.simulation - INFO - - Protection Level: 10.00%
2025-03-03 12:37:27,791 - src.simulation - INFO - - Participation Rate: 0.9529
2025-03-03 12:37:27,791 - src.simulation - INFO - - Protection Type: Buffer
2025-03-03 12:37:27,791 - src.simulation - INFO - - Underlying Asset Return: -6.2373%
2025-03-03 12:37:27,791 - src.structured_notes - INFO - BUFFERED NOTE CALCULATION:
2025-03-03 12:37:27,791 - src.structured_notes - INFO -   Step 1: Analyze underlying return: -6.2373%
2025-03-03 12:37:27,791 - src.structured_notes - INFO -   Step 2: Negative return detected, applying buffer protection
2025-03-03 12:37:27,791 - src.structured_notes - INFO -     Absolute value of return: |-6.2373%| = 6.2373%
2025-03-03 12:37:27,791 - src.structured_notes - INFO -     Buffer protection level: 10.0000%
2025-03-03 12:37:27,791 - src.structured_notes - INFO -   Step 3: Loss is WITHIN buffer (6.2373% â‰¤ 10.0000%)
2025-03-03 12:37:27,791 - src.structured_notes - INFO -     Full downside protection applies
2025-03-03 12:37:27,791 - src.structured_notes - INFO -   Step 4: Final return result: 0.00%
2025-03-03 12:37:27,791 - src.simulation - INFO - - Final Note Return: 0.0000%
2025-03-03 12:37:27,791 - src.portfolio - DEBUG - Applying returns to portfolio (value: $1,168,952.44)
2025-03-03 12:37:27,791 - src.portfolio - DEBUG -   sp500: $701,371.46 -> $657,625.10 (return: -6.24%)
2025-03-03 12:37:27,791 - src.portfolio - DEBUG -   bonds: $467,580.98 -> $468,123.05 (return: 0.12%)
2025-03-03 12:37:27,791 - src.portfolio - DEBUG - New portfolio value: $1,125,748.16
2025-03-03 12:37:27,791 - src.retirement - DEBUG - Year 2018: Fixed percentage withdrawal: 4.00% * $1,125,748.16 = $45,029.93
2025-03-03 12:37:27,791 - src.portfolio - DEBUG -   Withdrew $26,305.00 from sp500
2025-03-03 12:37:27,791 - src.portfolio - DEBUG -   Withdrew $18,724.92 from bonds
2025-03-03 12:37:27,791 - src.portfolio - DEBUG - After withdrawal: $1,080,718.23
2025-03-03 12:37:27,791 - src.simulation - INFO -   Portfolio 'traditional': $1,080,718.23 (Return: -7.55%)
2025-03-03 12:37:27,791 - src.portfolio - DEBUG - Rebalancing portfolio (value: $1,080,718.23)
2025-03-03 12:37:27,791 - src.portfolio - DEBUG -   sp500: $648,430.94 (60.00%)
2025-03-03 12:37:27,791 - src.portfolio - DEBUG -   bonds: $432,287.29 (40.00%)
2025-03-03 12:37:27,791 - src.portfolio - DEBUG - Applying returns to portfolio (value: $1,261,707.87)
2025-03-03 12:37:27,791 - src.portfolio - DEBUG -   sp500: $504,683.15 -> $473,204.75 (return: -6.24%)
2025-03-03 12:37:27,791 - src.portfolio - DEBUG -   bonds: $378,512.36 -> $378,951.18 (return: 0.12%)
2025-03-03 12:37:27,791 - src.portfolio - DEBUG -   notes: $378,512.36 -> $378,512.36 (return: 0.00%)
2025-03-03 12:37:27,791 - src.portfolio - DEBUG - New portfolio value: $1,230,668.29
2025-03-03 12:37:27,791 - src.retirement - DEBUG - Year 2018: Fixed percentage withdrawal: 4.00% * $1,230,668.29 = $49,226.73
2025-03-03 12:37:27,791 - src.portfolio - DEBUG -   Withdrew $18,928.19 from sp500
2025-03-03 12:37:27,791 - src.portfolio - DEBUG -   Withdrew $15,158.05 from bonds
2025-03-03 12:37:27,791 - src.portfolio - DEBUG -   Withdrew $15,140.49 from notes
2025-03-03 12:37:27,791 - src.portfolio - DEBUG - After withdrawal: $1,181,441.56
2025-03-03 12:37:27,791 - src.simulation - INFO -   Portfolio 'structured': $1,181,441.56 (Return: -6.36%)
2025-03-03 12:37:27,791 - src.portfolio - DEBUG - Rebalancing portfolio (value: $1,181,441.56)
2025-03-03 12:37:27,791 - src.portfolio - DEBUG -   sp500: $472,576.62 (40.00%)
2025-03-03 12:37:27,791 - src.portfolio - DEBUG -   bonds: $354,432.47 (30.00%)
2025-03-03 12:37:27,791 - src.portfolio - DEBUG -   notes: $354,432.47 (30.00%)
2025-03-03 12:37:27,791 - src.simulation - INFO - Simulating year 2019
2025-03-03 12:37:27,791 - src.simulation - INFO - ===== YEAR 2019 RETURNS =====
2025-03-03 12:37:27,791 - src.simulation - INFO - S&P 500: 28.8781%, Bond: 8.8339%
2025-03-03 12:37:27,791 - src.simulation - INFO - Selecting structured note for year 2019
2025-03-03 12:37:27,792 - src.simulation - INFO - Found 4 notes available for year 2019
2025-03-03 12:37:27,792 - src.simulation - INFO - Target protection level: 10%
2025-03-03 12:37:27,792 - src.simulation - INFO - Found exact match: 10% Buffer, PR: 0.9532
2025-03-03 12:37:27,792 - src.structured_notes - DEBUG - Created structured note: No ID, PR: 0.95, Protection: 0.10, Year: 2019
2025-03-03 12:37:27,792 - src.simulation - INFO - STRUCTURED NOTE: S&P 500 10% Buffer Note (PR: 0.95)
2025-03-03 12:37:27,792 - src.simulation - INFO - - Protection Level: 10.00%
2025-03-03 12:37:27,792 - src.simulation - INFO - - Participation Rate: 0.9532
2025-03-03 12:37:27,792 - src.simulation - INFO - - Protection Type: Buffer
2025-03-03 12:37:27,792 - src.simulation - INFO - - Underlying Asset Return: 28.8781%
2025-03-03 12:37:27,792 - src.structured_notes - INFO - BUFFERED NOTE CALCULATION:
2025-03-03 12:37:27,792 - src.structured_notes - INFO -   Step 1: Analyze underlying return: 28.8781%
2025-03-03 12:37:27,792 - src.structured_notes - INFO -   Step 2: Positive return detected, applying participation rate
2025-03-03 12:37:27,792 - src.structured_notes - INFO -     Calculation: 28.8781% Ã— 0.9532
2025-03-03 12:37:27,792 - src.structured_notes - INFO -   Step 3: Final positive return result: 27.5265%
2025-03-03 12:37:27,792 - src.simulation - INFO - - Final Note Return: 27.5265%
2025-03-03 12:37:27,792 - src.portfolio - DEBUG - Applying returns to portfolio (value: $1,080,718.23)
2025-03-03 12:37:27,792 - src.portfolio - DEBUG -   sp500: $648,430.94 -> $835,685.28 (return: 28.88%)
2025-03-03 12:37:27,792 - src.portfolio - DEBUG -   bonds: $432,287.29 -> $470,474.99 (return: 8.83%)
2025-03-03 12:37:27,792 - src.portfolio - DEBUG - New portfolio value: $1,306,160.27
2025-03-03 12:37:27,792 - src.retirement - DEBUG - Year 2019: Fixed percentage withdrawal: 4.00% * $1,306,160.27 = $52,246.41
2025-03-03 12:37:27,792 - src.portfolio - DEBUG -   Withdrew $33,427.41 from sp500
2025-03-03 12:37:27,792 - src.portfolio - DEBUG -   Withdrew $18,819.00 from bonds
2025-03-03 12:37:27,792 - src.portfolio - DEBUG - After withdrawal: $1,253,913.86
2025-03-03 12:37:27,792 - src.simulation - INFO -   Portfolio 'traditional': $1,253,913.86 (Return: 16.03%)
2025-03-03 12:37:27,792 - src.portfolio - DEBUG - Rebalancing portfolio (value: $1,253,913.86)
2025-03-03 12:37:27,792 - src.portfolio - DEBUG -   sp500: $752,348.31 (60.00%)
2025-03-03 12:37:27,792 - src.portfolio - DEBUG -   bonds: $501,565.54 (40.00%)
2025-03-03 12:37:27,792 - src.portfolio - DEBUG - Applying returns to portfolio (value: $1,181,441.56)
2025-03-03 12:37:27,792 - src.portfolio - DEBUG -   sp500: $472,576.62 -> $609,047.63 (return: 28.88%)
2025-03-03 12:37:27,792 - src.portfolio - DEBUG -   bonds: $354,432.47 -> $385,742.57 (return: 8.83%)
2025-03-03 12:37:27,792 - src.portfolio - DEBUG -   notes: $354,432.47 -> $451,995.45 (return: 27.53%)
2025-03-03 12:37:27,792 - src.portfolio - DEBUG - New portfolio value: $1,446,785.65
2025-03-03 12:37:27,792 - src.retirement - DEBUG - Year 2019: Fixed percentage withdrawal: 4.00% * $1,446,785.65 = $57,871.43
2025-03-03 12:37:27,792 - src.portfolio - DEBUG -   Withdrew $24,361.91 from sp500
2025-03-03 12:37:27,792 - src.portfolio - DEBUG -   Withdrew $15,429.70 from bonds
2025-03-03 12:37:27,792 - src.portfolio - DEBUG -   Withdrew $18,079.82 from notes
2025-03-03 12:37:27,792 - src.portfolio - DEBUG - After withdrawal: $1,388,914.22
2025-03-03 12:37:27,792 - src.simulation - INFO -   Portfolio 'structured': $1,388,914.22 (Return: 17.56%)
2025-03-03 12:37:27,792 - src.portfolio - DEBUG - Rebalancing portfolio (value: $1,388,914.22)
2025-03-03 12:37:27,792 - src.portfolio - DEBUG -   sp500: $555,565.69 (40.00%)
2025-03-03 12:37:27,792 - src.portfolio - DEBUG -   bonds: $416,674.27 (30.00%)
2025-03-03 12:37:27,792 - src.portfolio - DEBUG -   notes: $416,674.27 (30.00%)
2025-03-03 12:37:27,792 - src.simulation - INFO - Simulating year 2020
2025-03-03 12:37:27,792 - src.simulation - INFO - ===== YEAR 2020 RETURNS =====
2025-03-03 12:37:27,792 - src.simulation - INFO - S&P 500: 16.2589%, Bond: 7.7151%
2025-03-03 12:37:27,792 - src.simulation - INFO - Selecting structured note for year 2020
2025-03-03 12:37:27,792 - src.simulation - INFO - Found 4 notes available for year 2020
2025-03-03 12:37:27,792 - src.simulation - INFO - Target protection level: 10%
2025-03-03 12:37:27,793 - src.simulation - INFO - Found exact match: 10% Buffer, PR: 0.9025
2025-03-03 12:37:27,793 - src.structured_notes - DEBUG - Created structured note: No ID, PR: 0.90, Protection: 0.10, Year: 2020
2025-03-03 12:37:27,793 - src.simulation - INFO - STRUCTURED NOTE: S&P 500 10% Buffer Note (PR: 0.90)
2025-03-03 12:37:27,793 - src.simulation - INFO - - Protection Level: 10.00%
2025-03-03 12:37:27,793 - src.simulation - INFO - - Participation Rate: 0.9025
2025-03-03 12:37:27,793 - src.simulation - INFO - - Protection Type: Buffer
2025-03-03 12:37:27,793 - src.simulation - INFO - - Underlying Asset Return: 16.2589%
2025-03-03 12:37:27,793 - src.structured_notes - INFO - BUFFERED NOTE CALCULATION:
2025-03-03 12:37:27,793 - src.structured_notes - INFO -   Step 1: Analyze underlying return: 16.2589%
2025-03-03 12:37:27,793 - src.structured_notes - INFO -   Step 2: Positive return detected, applying participation rate
2025-03-03 12:37:27,793 - src.structured_notes - INFO -     Calculation: 16.2589% Ã— 0.9025
2025-03-03 12:37:27,793 - src.structured_notes - INFO -   Step 3: Final positive return result: 14.6745%
2025-03-03 12:37:27,793 - src.simulation - INFO - - Final Note Return: 14.6745%
2025-03-03 12:37:27,793 - src.portfolio - DEBUG - Applying returns to portfolio (value: $1,253,913.86)
2025-03-03 12:37:27,793 - src.portfolio - DEBUG -   sp500: $752,348.31 -> $874,672.05 (return: 16.26%)
2025-03-03 12:37:27,793 - src.portfolio - DEBUG -   bonds: $501,565.54 -> $540,261.67 (return: 7.72%)
2025-03-03 12:37:27,793 - src.portfolio - DEBUG - New portfolio value: $1,414,933.72
2025-03-03 12:37:27,793 - src.retirement - DEBUG - Year 2020: Fixed percentage withdrawal: 4.00% * $1,414,933.72 = $56,597.35
2025-03-03 12:37:27,793 - src.portfolio - DEBUG -   Withdrew $34,986.88 from sp500
2025-03-03 12:37:27,793 - src.portfolio - DEBUG -   Withdrew $21,610.47 from bonds
2025-03-03 12:37:27,793 - src.portfolio - DEBUG - After withdrawal: $1,358,336.37
2025-03-03 12:37:27,793 - src.simulation - INFO -   Portfolio 'traditional': $1,358,336.37 (Return: 8.33%)
2025-03-03 12:37:27,793 - src.portfolio - DEBUG - Rebalancing portfolio (value: $1,358,336.37)
2025-03-03 12:37:27,793 - src.portfolio - DEBUG -   sp500: $815,001.82 (60.00%)
2025-03-03 12:37:27,793 - src.portfolio - DEBUG -   bonds: $543,334.55 (40.00%)
2025-03-03 12:37:27,793 - src.portfolio - DEBUG - Applying returns to portfolio (value: $1,388,914.22)
2025-03-03 12:37:27,793 - src.portfolio - DEBUG -   sp500: $555,565.69 -> $645,894.69 (return: 16.26%)
2025-03-03 12:37:27,793 - src.portfolio - DEBUG -   bonds: $416,674.27 -> $448,820.98 (return: 7.72%)
2025-03-03 12:37:27,793 - src.portfolio - DEBUG -   notes: $416,674.27 -> $477,818.99 (return: 14.67%)
2025-03-03 12:37:27,793 - src.portfolio - DEBUG - New portfolio value: $1,572,534.65
2025-03-03 12:37:27,793 - src.retirement - DEBUG - Year 2020: Fixed percentage withdrawal: 4.00% * $1,572,534.65 = $62,901.39
2025-03-03 12:37:27,793 - src.portfolio - DEBUG -   Withdrew $25,835.79 from sp500
2025-03-03 12:37:27,793 - src.portfolio - DEBUG -   Withdrew $17,952.84 from bonds
2025-03-03 12:37:27,793 - src.portfolio - DEBUG -   Withdrew $19,112.76 from notes
2025-03-03 12:37:27,793 - src.portfolio - DEBUG - After withdrawal: $1,509,633.27
2025-03-03 12:37:27,793 - src.simulation - INFO -   Portfolio 'structured': $1,509,633.27 (Return: 8.69%)
2025-03-03 12:37:27,793 - src.portfolio - DEBUG - Rebalancing portfolio (value: $1,509,633.27)
2025-03-03 12:37:27,793 - src.portfolio - DEBUG -   sp500: $603,853.31 (40.00%)
2025-03-03 12:37:27,793 - src.portfolio - DEBUG -   bonds: $452,889.98 (30.00%)
2025-03-03 12:37:27,793 - src.portfolio - DEBUG -   notes: $452,889.98 (30.00%)
2025-03-03 12:37:27,793 - src.simulation - INFO - Simulation completed
2025-03-03 12:37:27,796 - src.main - INFO - Saved detailed results to results/simulation_results_20250303_123727.csv
2025-03-03 12:37:27,797 - src.main - INFO - Saved summary statistics to results/simulation_summary_20250303_123727.csv
2025-03-03 12:37:27,797 - src.main - INFO - Simulation completed successfully
